# 4장. 주석

## 주석은 나쁜 코드를 보완하지 못한다

- 주석이 있어야 되는 본질적인 이유에 대해 생각해보자!

- 저자는 주석을 추가하는 이유로는 코드 품질이 나쁘기 때문이라고 설명한다.

  저자와 같이 저도 주석이 있다는 것은 그 코드가 클린하지 못하여 설명을 해줘야 한다는 것을 뜻한다고 생각합니다.

## 코드를 의도로 표현하라!

```java
// 직원에게 복지혜택을 받을 자격이 있는지 검사한다.
if ((employee.flags & HOURLY_FLAG) && (employee.age > 65)
if (employee.isEligibleForFullBenefits())
```

- 직관적인 함수 명으로 주석을 대체할 수 있다.
- 이 챕터가 거의 모든 주석을 아우르는 거라 할 수있다. 3장의 함수와 2장의 의미있는 이름에서 본 것처럼 네이밍을 서술 적으로 잘 설명한다면, 이런 자잘한 주석은 있어야할 필요가 없다.

위와 아래의 차이는 일단 위에서는 65는 매직넘버로서 상수처리를 해주면 더 이해가 편할 것이고, 여러 개의 조건을 달아서 이해하기 어렵다면, 그 로직을 함수처럼 네이밍을 해서 조건문의 내용이 뭔지 바로 의도를 알 수 있도록 하면 구지 주석이 필요 없을 것 같다고 느낀다.

## 좋은 주석

#### 법적인 주석: 각 소스 파일 첫머리에 들어가는 저작권 정보와 소유권 정보 등

- 오픈 소스의 경우, 라이선스에 관한 경고문이나, 회사의 법적 소유권을 증명하기 위해 필요하다.

  다만, 이러한 주석을 코드에 명시하기 보단, READ.md 같은 문서 앞단에 표기해주던가와 같은 문서화 방식으로도 표기를 하게 되면, 이런 주석은 거의 없어지게 되고, 주석도 필요한 부분을 제외하곤 없을 것 같다.

#### 정보를 제공하는 주석

```java
// 테스트 중인 Responder 인스턴스를 반환
protected abstract Responder responderInstance();
// kk:mm:ss EEE, MMM dd, yyyy 형식이다.
Pattern timeMatcher = Pattern.compile("\\d*:\\d*\\d* \\w*, \\w*, \\d*, \\d*");
```

- 기본적인 정보를 제공하기 위해 작성된 주석이다.

  > 보통 협업을 할때 , 정보를 제공하거나 혹은 함수나 로직의 의도를 설명하기 위해 주석을 작성하는데 ,
  >
  > 이 부분 조차도 클래스를 만든 다던가 ,함수 네이밍을 통해 서술을 한다던가 등의 방식으로 리팩토링을 하게 되면, 불필요한 주석이라고 할 수 있다.

#### 의도를 설명하는 주석

```java
// 스레드를 대량 생성하는 방법으로 어떻게든 경쟁 조건을 만들려 시도한다.
for (int i = 0; i > 2500; i++) {
    WidgetBuilderThread widgetBuilderThread =
        new WidgetBuilderThread(widgetBuilder, text, parent, failFlag);
    Thread thread = new Thread(widgetBuilderThread);
    thread.start();
}
```

- 의도 자체는 좋지만, 정말 필수적으로 논의해야 될 정도의 아젠다 건의 로직이 아니라면, 주석을 구지 안 달고 클린하게 코드를 작성하면, 비교 할 수 있지 않을까 생각한다.

#### 의도를 설명하는 주석

```java
assertTrue(a.CompateTo(a) === 0)); // a ===a
```

- 인수나 반환 값을 제대로 명시해준다면 구지 주석을 일일히 달아줘야 할 까 라는 생각이 든다.

  3장 함수에서 알려주는 return 반환 값으로 명시적으로 알 수 있다면 불필요한 주석이라고 생각든다.

#### 결과를 경고하는 주석

```java
// 여유 시간이 충분하지 않다면 실행하지 마십시오.
public void _testWithReallyBigFile() {

}
```

- 주석은 최대한 지양하지만, 이 부분은 나도 유일하게 사용할만한 주석으로 생각된다.
- TDD 개발이나 테스트 케이스 로직이 다른 부분으로 인해 영향받는 다면, 개발 도중에는 디른 개발자를 위해서 적어주어도 무방할 것 같다. 하지만, 시간이 많다면 구지? 라는 생각도 든다. 주석을 다는 방법보다는 마저 로직을 완성해서 사이드 이펙트가 없도록 하면 되지 않을까 생각한다.

#### TODO 주석

```java
// TODO-MdM 현재 필요하지 않다.
// 체크아웃 모델을 도입하면 함수가 필요 없다.
protected VersionInfo makeVersion() throws Exception {
    return null;
}
```

- 대부분의 IDE가 TODO 를 prefix로 잡아서 주석을 잡아주는 기능을 제공하기 때문에 유용하다고 생각들 수 있다.

- 하지만, 이 주석도 한번 쓰게 되면, 너무 남발해서 사용하는 경향이 있다. 그래서 개발중에 잠깐 주석을 남기고 PR올리기 전이나 커밋전에는 지우고 코드를 완성한다면 이 또한 불필요한 주석이 될 것으로 생각된다.

- TODO, FIXME는 공통적으로 활용된다.

#### 중요성을 강조하는 주석

```java
String listItemContent = match.group(3).trim();
// 여기서 trim은 정말 중요하다. trim 함수는 문자열에서 시작 공백을 제거한다.
// 문자열에 시작 공백이 있으면 다른 문자열로 인식되기 때문이다.
new ListItemWidget(this, listItemContent, this.level + 1);
return buildList(text.substring(match.end()));
```

이 주석의 경우는 피치 못할 경우에만 붙이는게 낫지 않을까 생각된다. 소통을 통해 왜 trim이 필요한지 이러한 로직의 이유를 공유를 미리 한다면, 주석이 필요없다고 생각되고, 로직 자체에서 trim을 왜 하는지 파고 들다보면, 가독성 좋은 코드는 추측을 하게 도와주므로

#### 공개 API에서 Javadocs

- 표준 라이브러리에서 사용한 Javadocs의 주석은 사용할만 한다. 이 부분 또한, 잘못된 위치의 존재할 경우 , 그릇된 정보의 전달 가능성이 없지 않아 존재 하므로 조심하라고 권고한다.

## 나쁜 주석

- ##### 주절거리는 주석

  - 본인만 알 수 있는 주석 같은 경우나 불필요하게 적은 경우라고 생각 되어진다.

- ##### 같은 이야기를 중복하는 주석

  - 이미 알 수 있는 내용데 대해 일일히 주석을 다는 경우라고 보면 된다.

- ##### 오해할 여지가 있는 주석

- ##### 의무적으로 다는 주석

  - JSdocs 예시를 드는데, 모든 함수나 변수의 주석을 달아야한 규칙이 있다고 하는 데, 변수명이나 함수명으로도 충분히 추론 가능하면 구지 필요가 없다고 생각한다

- ##### 이력을 기록하는 주석: Git이 있는데 뭐하러?

  - 의무적으로 다는 주석
  - 이력을 기록하는 주석
    - 이제는 소스 코드 관리 시스템이 있다. 제거하자.
  - 있으나 마나 한 주석
  - 무서운 잡음
  - 함수나 변수로 표현할 수 있다면 주석을 달지 마라
  - 위치를 표현하는 주석
  - 닫는 괄호에 다는 주석
    - 중첩이 심하고 장황한 함수라면, 차라리 함수 분리를 시도해보자.
  - 공로를 돌리거나 저자를 표시하는 주석
  - 주석으로 처리한 코드: 개발하는 당시 , 필요있을 거라고 생각해서 주석처리 하고 하는데, 그러다보면 결국 안 쓰거나 혹은 그 로직을 재사용하였다 하더라도 추후에는 더 좋은 방식으로 리팩토링하기때문에 지워버리거나 다른 파일에 잠깐 옮겨 놓는 것이 나을 것 같다.
  - HTML 주석
  - 전역 정보
  - 너무 많은 정보
  - 모호한 관계

## 📚 배운점

- 좋은 주석의 대해서도 알게 되었지만, 주석이라는 목적 자체를 생각하면 이 또한 부정하는 것이라고 볼 수 있다.

- 주석을 달고 쉽게 해결하기 보다는 어떻게하면 더욱 가독성 좋게 팀원에게 전달 할수 있을지, 클린하게 리팩토링하고 코드를 짤지를 한번 더 생각해보면 해결될 이슈로 생각되어 진다.

## 💬 이야기 해보고 싶은 주제

- Javadocs 혹은 JSdocs는 정말 나쁜 주석일까?
- 어디까지가 좋은 주석이라고 생각되며, 팀원들은 어떤 경우의 주로 주석을 많이 다는 지?
